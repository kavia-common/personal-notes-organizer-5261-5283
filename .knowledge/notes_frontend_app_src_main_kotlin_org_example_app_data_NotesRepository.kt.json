{"is_source_file": true, "format": "Kotlin", "description": "This file defines the NotesRepository class, providing asynchronous CRUD operations for notes and folders in a note-taking Android app. It manages database interactions, handles threading for background operations and callback invocation on the main thread, and provides methods to fetch, insert, update, and delete notes and folders.", "external_files": ["org.example.app.data.DatabaseContract.Folders", "org.example.app.data.DatabaseContract.Notes", "org.example.app.data.model.Folder", "org.example.app.data.model.Note", "android.content.ContentValues", "android.content.Context", "android.database.Cursor", "java.util.concurrent.ExecutorService", "java.util.concurrent.Executors", "android.os.Handler", "android.os.Looper", "org.example.app.data.NotesDbHelper"], "external_methods": ["NotesDbHelper.getInstance", "Cursor.use", "buildSelection", "buildSelectionArgs", "combineSelections", "readNotes", "readFolders"], "published": ["NotesRepository", "NotesRepository.getInstance"], "classes": [{"name": "NotesRepository", "description": "A singleton class that provides asynchronous CRUD operations for notes and folders, managing database interactions with thread handling and callbacks."}], "methods": [{"name": "getAllNotes", "description": "Fetches all notes sorted by pinned and updatedAt timestamps, invoking callback with the list."}, {"name": "getFavoriteNotes", "description": "Fetches favorite notes with optional query filtering."}, {"name": "getNotesByFolder", "description": "Fetches notes within a specific folder, with optional query filtering."}, {"name": "insertNote", "description": "Inserts a new note into the database and returns its id via callback."}, {"name": "updateNote", "description": "Updates an existing note identified by id."}, {"name": "deleteNote", "description": "Deletes a note by its id."}, {"name": "setFavorite", "description": "Toggles the favorite status of a note."}, {"name": "setPinned", "description": "Toggles the pinned status of a note."}, {"name": "getFolders", "description": "Retrieves all folder records."}, {"name": "insertFolder", "description": "Adds a new folder by name, returning its id."}, {"name": "deleteFolder", "description": "Removes a folder and unassigns notes from it."}], "calls": ["NotesDbHelper.getInstance", "Cursor.use", "db.query", "db.insert", "db.update", "db.delete", "buildSelection", "buildSelectionArgs", "combineSelections", "readNotes", "readFolders"], "search-terms": ["NotesRepository", "async database CRUD", "Android Kotlin notes data", "Folder notes management", "Thread handler database"], "state": 2, "file_id": 9, "knowledge_revision": 81, "git_revision": "", "revision_history": [{"21": ""}, {"80": ""}, {"81": ""}], "hash": "4707c1c2e240b9cafba11d390a04d65c", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/app/src/main/kotlin/org/example/app/data/NotesRepository.kt"}